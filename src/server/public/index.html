<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TikZ Advanced Server</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>TikZ Advanced Server</h1>
            <div class="status-container">
                <span class="status-label">Status:</span>
                <span id="status" class="status-indicator">Checking...</span>
            </div>
        </header>

        <div class="card">
            <h2>Server Information</h2>
            <div id="server-info">Loading...</div>
        </div>

        <div class="card">
            <h2>Test TikZ Rendering</h2>
            <div class="form-group">
                <label for="engine">LaTeX Engine:</label>
                <select id="engine">
                    <option value="pdflatex">pdfLaTeX</option>
                    <option value="lualatex">LuaLaTeX</option>
                    <option value="xelatex">XeLaTeX</option>
                </select>
            </div>
            <div class="form-group">
                <label for="format">Output Format:</label>
                <select id="format">
                    <option value="svg">SVG</option>
                    <option value="pdf">PDF</option>
                </select>
            </div>
            <div class="form-group">
                <label for="tikz-code">TikZ Code:</label>
                <textarea id="tikz-code" rows="10">\\begin{tikzpicture}
  \\draw (0,0) circle (1cm);
\\end{tikzpicture}</textarea>
            </div>
            <div class="form-group">
                <label for="preamble">LaTeX Preamble:</label>
                <textarea id="preamble" rows="5">\\usepackage{tikz}
\\usepackage{pgfplots}
\\pgfplotsset{compat=1.18}</textarea>
            </div>
            <button id="render-btn" class="btn">Render</button>
            <div class="loading" id="loading">
                <div class="spinner"></div>
                <span>Rendering...</span>
            </div>
        </div>

        <div class="card" id="result-card" style="display: none;">
            <h2>Result</h2>
            <div class="result-container">
                <div id="result-content"></div>
            </div>
            <div id="error-message" class="error-message"></div>
        </div>

        <div class="card">
            <h2>API Documentation</h2>
            <h3>Health Check</h3>
            <pre><code>GET /health</code></pre>
            <p>Check if the server is running and which LaTeX engines are available.</p>

            <h3>Render TikZ</h3>
            <pre><code>POST /render
Content-Type: application/json

{
  "tikzCode": "\\begin{tikzpicture}\\draw (0,0) circle (1cm);\\end{tikzpicture}",
  "format": "svg",
  "engine": "pdflatex",
  "preamble": "\\usepackage{tikz}"
}</code></pre>
            <p>Render a TikZ diagram and return the result as SVG or PDF.</p>
        </div>

        <footer>
            <p>TikZ Advanced Server | <a href="https://github.com/yourusername/obsidian-tikz-advanced" target="_blank">GitHub</a></p>
        </footer>
    </div>

    <script src="script.js"></script>
</body>
</html>
